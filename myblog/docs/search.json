[
  {
    "objectID": "posts/atividade2/index.html",
    "href": "posts/atividade2/index.html",
    "title": "Atividade 2 - Monitoramento de Frota de Ônibus",
    "section": "",
    "text": "Introdução\nNesta atividade implementei um sistema simples de monitoramento de frota utilizando a API Olho Vivo da SPTrans. O código realiza autenticação, consulta paradas e posições de ônibus de uma linha específica e exibe tudo em um mapa interativo gerado com Folium.\nO exercício permitiu praticar chamadas reais a APIs REST, manipulação de dados retornados em JSON e visualização geográfica com marcadores personalizados. Foi útil para entender melhor o fluxo de autenticação, requisições consecutivas e integração entre dados dinâmicos e mapas.\n\nimport requests\nfrom folium import Map, Marker, Icon\n\nBASE_URL = \"http://api.olhovivo.sptrans.com.br/v2.1\"\n\ntoken = \"8a7d9519cf4e8aca8da1494631030a5ac561326041a8ee9dcfef1a8dfdeeac94\"\n\n# Criar sessão \ns = requests.Session()\n\n# ---- autenticação -------\ndef autenticar():\n    url = f\"{BASE_URL}/Login/Autenticar?token={token}\"\n    r = s.post(url)\n    print(\"Autenticado?\", r.json())\n\ndef buscar_paradas(codigo_linha):\n    autenticar()\n    url = f\"{BASE_URL}/Parada/BuscarParadasPorLinha?codigoLinha={codigo_linha}\"\n    r = s.get(url)\n    if r.status_code != 200:\n        print(\"Erro:\", r.status_code)\n        return []\n    return r.json()\n\ndef buscar_posicoes(codigo_linha):\n    autenticar()\n    url = f\"{BASE_URL}/Posicao/Linha?codigoLinha={codigo_linha}\"\n    r = s.get(url)\n    dados = r.json()\n    \n    if \"vs\" in dados:\n        return dados[\"vs\"]\n    return []\n\ndef construir_mapa(paradas, onibus):\n    if not paradas:\n        return \"Sem paradas!\"\n\n    # centralizar no 3º ponto como na aula (mas seguro)\n    centro = [paradas[0][\"py\"], paradas[0][\"px\"]]\n\n    m = Map(location=centro, zoom_start=14)\n\n    # ---- adicionar paradas (azul) ----\n    for p in paradas:\n        Marker(\n            location=[p[\"py\"], p[\"px\"]],\n            popup=p[\"np\"],\n            icon=Icon(color=\"blue\")\n        ).add_to(m)\n\n    # ---- adicionar ônibus (vermelho) ----\n    for v in onibus:\n        Marker(\n            location=[v[\"py\"], v[\"px\"]],\n            popup=f\"Ônibus {v['p']}\",\n            icon=Icon(color=\"red\")\n        ).add_to(m)\n\n    return m\n\n\ncodigo = 1273 \n\nparadas = buscar_paradas(codigo)\nprint(\"Paradas encontradas:\", len(paradas))\n\nonibus = buscar_posicoes(codigo)\nprint(\"Ônibus encontrados:\", len(onibus))\n\nm = construir_mapa(paradas, onibus)\nm\n\nAutenticado? True\nParadas encontradas: 15\nAutenticado? True\nÔnibus encontrados: 0\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook"
  },
  {
    "objectID": "posts/atividade3/index.html",
    "href": "posts/atividade3/index.html",
    "title": "Atividade 3 - Regressão Linear",
    "section": "",
    "text": "Introdução\nNesta atividade, utilizei o método matricial clássico para ajustar um modelo de regressão linear simples relacionando anos de estudo ao salário. A implementação foi feita completamente em Python, sem bibliotecas prontas de machine learning, para reforçar o entendimento dos fundamentos da regressão.\nO modelo resultante produziu um valor de intercepto e inclinação coerentes com a tendência dos dados. A visualização com Plotly permitiu observar de forma clara como a reta ajustada acompanha os pontos reais, mostrando que existe, de fato, uma relação linear positiva entre as variáveis.\n\nimport numpy as np\nimport pandas as pd\nimport plotly.graph_objects as go\n\n# 1. Carregar dados\nX = np.loadtxt(\"X.txt\")\ny = np.loadtxt(\"y.txt\")\n\n# 2. Criar matriz [1, X]\nXmat = np.column_stack((np.ones(len(X)), X))\n\n# 3. Cálculo matricial: beta = (X'X)^(-1) X'y\nbeta = np.linalg.inv(Xmat.T @ Xmat) @ (Xmat.T @ y)\n\na = float(beta[0])   # intercepto\nb = float(beta[1])   # inclinação\n\nprint(\"Intercepto (a):\", a)\nprint(\"Inclinação (b):\", b)\n\n# 4. Criar valores da reta (usamos os mesmos x do dataset)\ny_pred = a + b * X\n\n# 5. Gráfico Plotly\nfig = go.Figure()\n\n# Pontos\nfig.add_trace(go.Scatter(\n    x=X,\n    y=y,\n    mode=\"markers\",\n    name=\"Dados\",\n    marker=dict(size=8)\n))\n\n# Reta estimada\nfig.add_trace(go.Scatter(\n    x=X,\n    y=y_pred,\n    mode=\"lines\",\n    name=\"Reta estimada\"\n))\n\nfig.update_layout(\n    title=\"Regressão Linear: Anos de Estudo vs Salário\",\n    xaxis_title=\"Anos de estudo\",\n    yaxis_title=\"Salário\",\n    template=\"plotly_white\"\n)\n\nfig.show()\n\nIntercepto (a): 373.93446839132355\nInclinação (b): 991.6278332981952\n\n\n                            \n                                            \n\n\nSegue o exemplo."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Blog das 3 Atividades - Beatriz Lucena",
    "section": "",
    "text": "Atividade 1 - Cotação do Dólar por Período\n\n\n\ncode\n\nanalysis\n\n\n\n\n\n\n\n\n\nNov 22, 2025\n\n\nBeatriz Lucena\n\n\n\n\n\n\n\n\n\n\n\n\nAtividade 2 - Monitoramento de Frota de Ônibus\n\n\n\ncode\n\nanalysis\n\n\n\n\n\n\n\n\n\nNov 19, 2025\n\n\nBeatriz Lucena\n\n\n\n\n\n\n\n\n\n\n\n\nAtividade 3 - Regressão Linear\n\n\n\ncode\n\nanalysis\n\n\n\n\n\n\n\n\n\nNov 15, 2025\n\n\nBeatriz Lucena\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/atividade1/index.html",
    "href": "posts/atividade1/index.html",
    "title": "Atividade 1 - Cotação do Dólar por Período",
    "section": "",
    "text": "Nesta atividade deveríamos criar uma rotina que recebe como entrada uma string no formato \"MMYYYY\"\ne retorna um gráfico de linha com a variação diária da cotação do dólar naquele mês.\nA API usada é a PTAX (Banco Central do Brasil).\nEla fornece a cotação diária do dólar, mas somente nos dias úteis, então dias sem cotação (feriados, fins de semana) precisam ser preenchidos usando a última cotação válida — isso foi implementado no código abaixo.\nA data que eu utilizarei será 06/2015\n\nimport requests\nimport pandas as pd\nimport calendar\nfrom datetime import datetime\nimport plotly.express as px\n\ndef f(mmyyyy):\n    # --- identificar início e fim do mês ---\n    first_date = datetime.strptime(mmyyyy, \"%m%Y\")\n    last_day = calendar.monthrange(first_date.year, first_date.month)[1]\n    last_date = first_date.replace(day=last_day)\n\n    # formatos aceitos pela API\n    ini1 = first_date.strftime(\"%m-%d-%Y\")\n    fim1 = last_date.strftime(\"%m-%d-%Y\")\n    ini2 = first_date.strftime(\"%d-%m-%Y\")\n    fim2 = last_date.strftime(\"%d-%m-%Y\")\n\n    # --- função interna para consultar ---\n    def consulta(ini, fim):\n        url = (\n            \"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\"\n            \"CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)\"\n            f\"?@dataInicial='{ini}'&@dataFinalCotacao='{fim}'\"\n            \"&$format=json\"\n        )\n        return requests.get(url).json()[\"value\"]\n\n    # tenta no formato 1\n    dados = consulta(ini1, fim1)\n\n    # se voltar vazio, tenta no formato 2\n    if len(dados) == 0:\n        dados = consulta(ini2, fim2)\n\n    # --- transforma em dataframe ---\n    df = pd.DataFrame(dados)\n    df[\"dataHoraCotacao\"] = pd.to_datetime(df[\"dataHoraCotacao\"])\n    df = df.sort_values(\"dataHoraCotacao\")\n\n    # --- criar datas completas ---\n    all_dates = pd.date_range(first_date, last_date)\n    df_full = pd.DataFrame({\"data\": all_dates})\n\n    # juntar com as datas reais da API\n    df_full = df_full.merge(df, left_on=\"data\", right_on=\"dataHoraCotacao\", how=\"left\")\n\n    # preencher feriados e fim de semana com cotação anterior\n    df_full[\"cotacaoCompra\"] = df_full[\"cotacaoCompra\"].ffill()\n\n    # --- criar gráfico ---\n    fig = px.line(df_full, x=\"data\", y=\"cotacaoCompra\",\n                  title=f\"Cotação do Dólar — {mmyyyy}\")\n    \n    return fig\n\n\n# mês 6, ano 2015\nfig = f(\"062015\")\nfig"
  },
  {
    "objectID": "posts/atividade1/index.html#introdução",
    "href": "posts/atividade1/index.html#introdução",
    "title": "Atividade 1 - Cotação do Dólar por Período",
    "section": "",
    "text": "Nesta atividade deveríamos criar uma rotina que recebe como entrada uma string no formato \"MMYYYY\"\ne retorna um gráfico de linha com a variação diária da cotação do dólar naquele mês.\nA API usada é a PTAX (Banco Central do Brasil).\nEla fornece a cotação diária do dólar, mas somente nos dias úteis, então dias sem cotação (feriados, fins de semana) precisam ser preenchidos usando a última cotação válida — isso foi implementado no código abaixo.\nA data que eu utilizarei será 06/2015\n\nimport requests\nimport pandas as pd\nimport calendar\nfrom datetime import datetime\nimport plotly.express as px\n\ndef f(mmyyyy):\n    # --- identificar início e fim do mês ---\n    first_date = datetime.strptime(mmyyyy, \"%m%Y\")\n    last_day = calendar.monthrange(first_date.year, first_date.month)[1]\n    last_date = first_date.replace(day=last_day)\n\n    # formatos aceitos pela API\n    ini1 = first_date.strftime(\"%m-%d-%Y\")\n    fim1 = last_date.strftime(\"%m-%d-%Y\")\n    ini2 = first_date.strftime(\"%d-%m-%Y\")\n    fim2 = last_date.strftime(\"%d-%m-%Y\")\n\n    # --- função interna para consultar ---\n    def consulta(ini, fim):\n        url = (\n            \"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\"\n            \"CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)\"\n            f\"?@dataInicial='{ini}'&@dataFinalCotacao='{fim}'\"\n            \"&$format=json\"\n        )\n        return requests.get(url).json()[\"value\"]\n\n    # tenta no formato 1\n    dados = consulta(ini1, fim1)\n\n    # se voltar vazio, tenta no formato 2\n    if len(dados) == 0:\n        dados = consulta(ini2, fim2)\n\n    # --- transforma em dataframe ---\n    df = pd.DataFrame(dados)\n    df[\"dataHoraCotacao\"] = pd.to_datetime(df[\"dataHoraCotacao\"])\n    df = df.sort_values(\"dataHoraCotacao\")\n\n    # --- criar datas completas ---\n    all_dates = pd.date_range(first_date, last_date)\n    df_full = pd.DataFrame({\"data\": all_dates})\n\n    # juntar com as datas reais da API\n    df_full = df_full.merge(df, left_on=\"data\", right_on=\"dataHoraCotacao\", how=\"left\")\n\n    # preencher feriados e fim de semana com cotação anterior\n    df_full[\"cotacaoCompra\"] = df_full[\"cotacaoCompra\"].ffill()\n\n    # --- criar gráfico ---\n    fig = px.line(df_full, x=\"data\", y=\"cotacaoCompra\",\n                  title=f\"Cotação do Dólar — {mmyyyy}\")\n    \n    return fig\n\n\n# mês 6, ano 2015\nfig = f(\"062015\")\nfig"
  }
]